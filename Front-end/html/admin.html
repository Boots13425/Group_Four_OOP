<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Portal | University Grades</title>
    <link rel="stylesheet" href="../css/admin.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
  </head>
  <body>
    <!-- Admin Dashboard Menu -->
    <nav id="adminMenu" class="admin-menu">
      <ul>
        <li>
          <a href="#" onclick="showAdminSection('overview')" id="menuOverview" class="active">
            <i class="fas fa-tachometer-alt"></i> Overview
          </a>
        </li>
        <li>
          <a href="#" onclick="showAdminSection('users')" id="menuUsers">
            <i class="fas fa-users"></i> Manage Users
          </a>
        </li>
        <li>
          <a href="#" onclick="showAdminSection('courses')" id="menuCourses">
            <i class="fas fa-book"></i> Manage Courses
          </a>
        </li>
        <li>
          <a href="#" onclick="showAdminSection('enrollment')" id="menuEnrollment">
            <i class="fas fa-user-plus"></i> Enrollment
          </a>
        </li>
        <li>
          <a href="#" onclick="showAdminSection('policy')" id="menuPolicy">
            <i class="fas fa-file-alt"></i> Grades Policy
          </a>
        </li>
        <li>
          <a href="#" onclick="showAdminSection('config')" id="menuConfig">
            <i class="fas fa-cogs"></i> System Config
          </a>
        </li>
        <li class="logout-link">
          <a href="#" onclick="logout()" id="menuLogout">
            <i class="fas fa-sign-out-alt"></i> Logout
          </a>
        </li>
      </ul>
    </nav>

    <!-- Admin Dashboard Content -->
    <div id="adminDashboard" class="screen">
      <nav class="navbar">
        <div class="nav-brand">
          <i class="fas fa-cog"></i>
          <span>Admin Portal</span>
        </div>
        <div class="nav-user">
          <span id="welcomeMessage">Welcome, Administrator</span>
        </div>
      </nav>
      <div class="dashboard-container">
        <aside class="sidebar" style="display:none;">
          <!-- Sidebar hidden for menu navigation -->
        </aside>
        <main class="main-content">
          <!-- System Overview -->
          <div id="adminOverview" class="content-section active">
            <h2>System Overview</h2>
            <div class="stats-grid">
              <div class="stat-card">
                <i class="fas fa-users"></i>
                <div>
                  <h3 id="totalStudents">0</h3>
                  <p>Total Students</p>
                </div>
              </div>
              <div class="stat-card">
                <i class="fas fa-chalkboard-teacher"></i>
                <div>
                  <h3 id="totalProfessors">0</h3>
                  <p>Professors</p>
                </div>
              </div>
              <div class="stat-card">
                <i class="fas fa-book"></i>
                <div>
                  <h3 id="activeCourses">0</h3>
                  <p>Active Courses</p>
                </div>
              </div>
              <div class="stat-card">
                <i class="fas fa-graduation-cap"></i>
                <div>
                  <h3 id="averageGpa">0.0</h3>
                  <p>Average GPA</p>
                </div>
              </div>
            </div>
            <div class="system-status">
              <h3>System Status</h3>
              <div class="status-grid" id="systemStatusGrid">
                <!-- System status items will be loaded -->
              </div>
            </div>
          </div>

          <!-- Manage Users -->
          <div id="adminUsers" class="content-section">
            <h2>User Management</h2>
            <div class="user-controls">
              <button class="btn btn-primary" onclick="showAddUserModal()">
                <i class="fas fa-plus"></i> Add User
              </button>
              <div class="search-filter">
                <input
                  type="text"
                  placeholder="Search users..."
                  id="userSearch"
                />
                <select id="userRoleFilter">
                  <option value="">All Roles</option>
                  <option value="student">Students</option>
                  <option value="professor">Professors</option>
                  <option value="admin">Administrators</option>
                </select>
              </div>
            </div>
            <div class="users-table">
              <table>
                <thead>
                  <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Role</th>
                    <th>Status</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="usersTableBody">
                  <!-- User rows will be loaded here -->
                </tbody>
              </table>
            </div>
          </div>

          <!-- Manage Courses -->
          <div id="adminCourses" class="content-section">
            <h2>Course Management</h2>
            <div class="course-controls">
              <button class="btn btn-primary" onclick="showAddCourseModal()">
                <i class="fas fa-plus"></i> Add Course
              </button>
              <div class="search-filter">
                <input
                  type="text"
                  placeholder="Search courses..."
                  id="courseSearchAdmin"
                />
                <select id="departmentFilter">
                  <option value="">All Departments</option>
                  <option value="cs">Computer Science</option>
                  <option value="math">Mathematics</option>
                  <option value="physics">Physics</option>
                </select>
              </div>
            </div>
            <div class="courses-grid" id="coursesGrid">
              <!-- Course cards will be loaded here -->
            </div>
          </div>

          <!-- Enrollment Management -->
          <div id="adminEnrollment" class="content-section">
            <h2>Enrollment Management</h2>
            <div class="enrollment-tools">
              <div class="bulk-enrollment">
                <h4>Bulk Enrollment</h4>
                <input type="file" id="enrollmentFile" accept=".csv" />
                <button class="btn btn-primary" onclick="bulkEnrollment()">
                  <i class="fas fa-upload"></i> Upload Enrollment
                </button>
              </div>
              <div class="manual-enrollment">
                <h4>Manual Enrollment</h4>
                <form class="enrollment-form" id="manualEnrollmentForm">
                  <select id="enrollStudent" required>
                    <option value="">Select Student</option>
                    <!-- Students loaded here -->
                  </select>
                  <select id="enrollCourse" required>
                    <option value="">Select Course</option>
                    <!-- Courses loaded here -->
                  </select>
                  <button type="submit" class="btn btn-primary">
                    <i class="fas fa-user-plus"></i> Enroll
                  </button>
                </form>
              </div>
            </div>
            <div class="enrollment-stats">
              <h4>Enrollment Statistics</h4>
              <div class="stats-table">
                <table>
                  <thead>
                    <tr>
                      <th>Course</th>
                      <th>Capacity</th>
                      <th>Enrolled</th>
                      <th>Available</th>
                      <th>Waitlist</th>
                    </tr>
                  </thead>
                  <tbody id="enrollmentStatsBody">
                    <!-- Enrollment stats will be loaded here -->
                  </tbody>
                </table>
              </div>
            </div>
          </div>

          <!-- Grades Policy -->
          <div id="adminPolicy" class="content-section">
            <h2>Grades Policy Configuration</h2>
            <form class="policy-form" id="policyForm">
              <div class="policy-section">
                <h4>Grade Scale</h4>
                <div class="grade-scale" id="gradeScaleInputs">
                  <!-- Grade scale inputs will be loaded here -->
                </div>
              </div>
              <div class="policy-section">
                <h4>GPA Calculation</h4>
                <div class="gpa-settings">
                  <label>
                    <input type="checkbox" id="includePlusMinus" /> Include + and - grades
                  </label>
                  <label>
                    <input type="checkbox" id="weightByCredits" /> Weight by credit hours
                  </label>
                  <label>
                    <input type="checkbox" id="includeTransfer" /> Include transfer credits
                  </label>
                </div>
              </div>
              <div class="policy-section">
                <h4>Grade Submission</h4>
                <div class="submission-settings">
                  <div class="form-group">
                    <label>Deadline for midterm grades:</label>
                    <input type="date" id="midtermDeadline" />
                  </div>
                  <div class="form-group">
                    <label>Deadline for final grades:</label>
                    <input type="date" id="finalDeadline" />
                  </div>
                  <label>
                    <input type="checkbox" id="automaticReminders" /> Send automatic reminders
                  </label>
                </div>
              </div>
              <button type="submit" class="btn btn-primary">
                <i class="fas fa-save"></i> Save Policy
              </button>
            </form>
          </div>

          <!-- System Configuration -->
          <div id="adminConfig" class="content-section">
            <h2>System Configuration</h2>
            <div class="config-tabs">
              <button class="tab-btn active" onclick="showConfigTab('general')">
                General
              </button>
              <button class="tab-btn" onclick="showConfigTab('security')">
                Security
              </button>
              <button class="tab-btn" onclick="showConfigTab('backup')">
                Backup
              </button>
            </div>
            <div class="config-content">
              <div id="generalConfig" class="config-tab active">
                <h4>General Settings</h4>
                <form class="config-form" id="generalConfigForm">
                  <div class="form-group">
                    <label>University Name</label>
                    <input type="text" id="universityName" />
                  </div>
                  <div class="form-group">
                    <label>Academic Year</label>
                    <select id="academicYear"></select>
                  </div>
                  <div class="form-group">
                    <label>Current Semester</label>
                    <select id="currentSemester"></select>
                  </div>
                  <button type="submit" class="btn btn-primary">
                    Save Changes
                  </button>
                </form>
              </div>
              <div id="securityConfig" class="config-tab">
                <h4>Security Settings</h4>
                <form class="config-form" id="securityConfigForm">
                  <div class="form-group">
                    <label>Password Policy</label>
                    <div class="checkbox-group" id="passwordPolicyChecks"></div>
                  </div>
                  <div class="form-group">
                    <label>Session Timeout (minutes)</label>
                    <input type="number" id="sessionTimeout" min="5" max="120" />
                  </div>
                  <div class="form-group">
                    <label>Failed Login Attempts</label>
                    <input type="number" id="failedLogins" min="3" max="10" />
                  </div>
                  <button type="submit" class="btn btn-primary">
                    Save Changes
                  </button>
                </form>
              </div>
              <div id="backupConfig" class="config-tab">
                <h4>Backup Settings</h4>
                <form class="config-form" id="backupConfigForm">
                  <div class="form-group">
                    <label>Automatic Backup</label>
                    <select id="backupFrequency"></select>
                  </div>
                  <div class="form-group">
                    <label>Backup Time</label>
                    <input type="time" id="backupTime" />
                  </div>
                  <div class="form-group">
                    <label>Retention Period (days)</label>
                    <input type="number" id="retentionPeriod" min="7" max="365" />
                  </div>
                  <button
                    type="button"
                    class="btn btn-secondary"
                    onclick="runBackup()"
                  >
                    <i class="fas fa-play"></i> Run Backup Now
                  </button>
                  <button type="submit" class="btn btn-primary">
                    Save Changes
                  </button>
                </form>
              </div>
            </div>
          </div>
        </main>
      </div>
    </div>

    <!-- Modal for confirmations and forms -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <div id="modalBody"></div>
        </div>
    </div>

    <!-- Toast notifications -->
    <div id="toast" class="toast"></div>
    <script src="../js/admin.js"></script>
  </body>
</html>